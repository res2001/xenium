<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>xenium: xenium</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">xenium
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">xenium </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://dev.azure.com/mpoeter/xenium/_build?definitionId=1&amp;branchName=master"><img src="https://dev.azure.com/mpoeter/xenium/_apis/build/status/mpoeter.xenium?branchName=master" alt="Build Status" class="inline"/></a> <a href="https://opensource.org/licenses/MIT"><object type="image/svg+xml" data="https://img.shields.io/badge/license-MIT-blue.svg" style="pointer-events: none;">MIT Licensed</object></a> <a href="https://mpoeter.github.io/xenium"><object type="image/svg+xml" data="https://img.shields.io/badge/docs-doxygen-purple.svg" style="pointer-events: none;">Documentation</object></a></p>
<p>xenium is a header-only library that provides a collection of concurrent data structures and memory reclamation algorithms. The data structures are parameterized so that they can be used with various reclamation schemes (similar to how the STL allows customization of allocators).</p>
<ul>
<li>header only</li>
<li>highly customizable</li>
<li>no initialization code needed</li>
<li>supports dynamic number of threads (no fixed compile time specification)</li>
</ul>
<p>The <a href="https://mpoeter.github.io/xenium">documentation</a> provides more details.</p>
<p>This project is based on my previous work in <a href="https://github.com/mpoeter/emr">https://github.com/mpoeter/emr</a></p>
<h1>Usage Example</h1>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;xenium/ramalhete_queue.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;xenium/reclamation/epoch_based.hpp&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>msg { ... };</div>
<div class="line"> </div>
<div class="line"><a class="code" href="classxenium_1_1ramalhete__queue.html">xenium::ramalhete_queue</a>&lt;</div>
<div class="line">  std::unique_ptr&lt;msg&gt;,</div>
<div class="line">  <a class="code" href="structxenium_1_1policy_1_1reclaimer.html">xenium::policy::reclaimer&lt;xenium::reclamation::epoch_based&lt;&gt;</a>&gt;,</div>
<div class="line">  <a class="code" href="structxenium_1_1policy_1_1entries__per__node.html">xenium::policy::entries_per_node&lt;2048&gt;</a></div>
<div class="line">&gt; queue;</div>
<div class="line"> </div>
<div class="line">queue.push(std::make_unique&lt;msg&gt;());</div>
<div class="line"> </div>
<div class="line">std::unique_ptr&lt;msg&gt; data;</div>
<div class="line"><span class="keywordflow">if</span> (queue.try_pop(data)) {</div>
<div class="line">    <span class="comment">// do something with data</span></div>
<div class="line">}</div>
</div><!-- fragment --><h2>Data Structures</h2>
<p>At the moment the number of provided data structures is rather small since the focus so far was on the reclamation schemes. However, the plan is to add several more data structures in the near future.</p>
<ul>
<li><code>michael_scott_queue</code> - an unbounded lock-free multi-producer/multi-consumer queue proposed by Michael and Scott [<a href="#ref-michael-1996">MS96</a>].</li>
<li><code>ramalhete_queue</code> - a fast unbounded lock-free multi-producer/multi-consumer queue proposed by Ramalhete [<a href="#ref-ramalhete-2016">Ram16</a>].</li>
<li><code>vyukov_bounded_queue</code> - a bounded multi-producer/multi-consumer FIFO queue based on the version proposed by Vyukov [<a href="#ref-vyukov-2010">Vyu10</a>].</li>
<li><code>kirsch_kfifo_queue</code> - an unbounded multi-producer/multi-consumer k-FIFO queue proposed by Kirsch et al. [<a href="#ref-kirsch-2013">KLP13</a>].</li>
<li><code>kirsch_bounded_kfifo_queue</code> - a bounded multi-producer/multi-consumer k-FIFO queue proposed by Kirsch et al. [<a href="#ref-kirsch-2013">KLP13</a>].</li>
<li><code>nikolaev_queue</code> - an unbounded multi-producer/multi-consumer queue proposed by Nikolaev [<a href="#ref-nikolaev-2019">Nik19</a>].</li>
<li><code>nikolaev_bounded_queue</code> - a bounded multi-producer/multi-consumer queue proposed by Nikolaev [<a href="#ref-nikolaev-2019">Nik19</a>].</li>
<li><code>harris_michael_list_based_set</code> - a lock-free container that contains a sorted set of unique objects. This data structure is based on the solution proposed by Michael [<a href="#ref-michael-2002">Mic02</a>] which builds upon the original proposal by Harris [<a href="#ref-harris-2001">Har01</a>].</li>
<li><code>harris_michael_hash_map</code> - a lock-free hash-map based on the solution proposed by Michael [<a href="#ref-michael-2002">Mic02</a>] which builds upon the original proposal by Harris [<a href="#ref-harris-2001">Har01</a>].</li>
<li><code>chase_work_stealing_deque</code> - a work stealing deque based on the proposal by Chase and Lev [<a href="#ref-chase-2005">CL05</a>].</li>
<li><code>vyukov_hash_map</code> - a concurrent hash-map that uses fine grained locking for update operations. This implementation is heavily inspired by the version proposed by Vyukov [<a href="#ref-vyukov-2008">Vyu08</a>].</li>
<li><code>left_right</code> - a generic implementation of the LeftRight algorithm proposed by Ramalhete and Correia [<a href="#ref-ramalhete-2015">RC15</a>].</li>
<li><code>seqlock</code> - an implementation of the sequence lock (also often referred to as "sequential lock").</li>
</ul>
<h2>Reclamation Schemes</h2>
<p>The implementation of the reclamation schemes is based on an adapted version of the interface proposed by Robison [<a href="#ref-robison-2013">Rob13</a>].</p>
<p>The following reclamation schemes are implemented:</p><ul>
<li><code>lock_free_ref_count</code> [<a href="#ref-valois-1995">Val95</a>, <a href="#ref-michael-1995">MS95</a>]</li>
<li><code>hazard_pointer</code> [<a href="#ref-michael-2004">Mic04</a>]</li>
<li><code>hazard_eras</code> [<a href="#ref-ramalhete-2017">RC17</a>]</li>
<li><code>quiescent_state_based</code></li>
<li><code>generic_epoch_based</code> - this is a generalized epoch based reclaimer that can be configured in several ways. For simplicity, the following aliases are predefined for the corresponding configurations.<ul>
<li><code>epoch_based</code> [<a href="#ref-fraser-2004">Fra04</a>]</li>
<li><code>new_epoch_based</code> [<a href="#ref-hart-2007">HMBW07</a>]</li>
<li><code>debra</code> [<a href="#ref-brown-2015">Bro15</a>]</li>
</ul>
</li>
<li><code>stamp_it</code> [<a href="#ref-pöter-2018">PT18a</a>, <a href="#ref-pöter-2018-tr">PT18b</a>]</li>
</ul>
<h2>Building</h2>
<p>xenium is a header only library, so in order to use it, it is sufficient to include the xenium folder in your list of include directories. No other 3rd party libraries are required. However, the implementation uses C++17 features, so a compiler with sufficient C++17 support is required. The following compilers are used in the CI builds and are therefore known to be supported:</p><ul>
<li>gcc9</li>
<li>clang10</li>
<li>Visual Studio 2019</li>
</ul>
<p>The unit test require <code>googletest</code> and the benchmarks require <code>taocpp/json</code> and <code>taocpp/config</code>. These dependencies are included as submodules, so the unit tests and/or the benchmarks can be built as follows: </p><div class="fragment"><div class="line">git clone https://github.com/mpoeter/xenium.git &amp;&amp; cd xenium</div>
<div class="line">git submodule update --init --recursive</div>
<div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake ..</div>
<div class="line">make gtest</div>
<div class="line">make benchmark</div>
</div><!-- fragment --><h3>References</h3>
<table style="border:0px">
<tr>
<td valign="top"><a class="anchor" id="ref-brown-2015"></a>[Bro15] </td><td>Trevor Alexander Brown. <a href="http://www.cs.utoronto.ca/~tabrown/debra/paper.podc15.pdf">Reclaiming memory for lock-free data structures: There has to be a better way</a>. In <em>Proceedings of the 2015 ACM Symposium on Principles of Distributed Computing (PODC)</em>, pages 261–270. ACM, 2015.  </td></tr>
<tr>
<td valign="top"><a class="anchor" id="ref-chase-2005"></a>[CL05] </td><td>David Chase and Yossi Lev. <a href="https://www.dre.vanderbilt.edu/~schmidt/PDF/work-stealing-dequeue.pdf">Dynamic circular work-stealing deque</a>. In <em>Proceedings of the 17th Annual ACM Symposium on Parallelism in Algorithms and Architectures (SPAA)</em>, pages 21–28. ACM, 2005.  </td></tr>
<tr>
<td valign="top"><a class="anchor" id="ref-fraser-2004"></a>[Fra04] </td><td>Keir Fraser. <a href="https://www.cl.cam.ac.uk/techreports/UCAM-CL-TR-579.pdf"><em>Practical lock-freedom</em></a>. PhD thesis, University of Cambridge Computer Laboratory, 2004.  </td></tr>
<tr>
<td valign="top"><a class="anchor" id="ref-harris-2001"></a>[Har01] </td><td>Timothy L. Harris. <a href="https://www.cl.cam.ac.uk/research/srg/netos/papers/2001-caslists.pdf">A pragmatic implementation of non-blocking linked-lists</a>. In <em>Proceedings of the 15th International Conference on Distributed Computing (DISC)</em>, pages 300–314. Springer-Verlag, 2001.  </td></tr>
<tr>
<td valign="top"><a class="anchor" id="ref-hart-2007"></a>[HMBW07] </td><td>Thomas E. Hart, Paul E. McKenney, Angela Demke Brown, and Jonathan Walpole. <a href="http://csng.cs.toronto.edu/publication_files/0000/0159/jpdc07.pdf">Performance of memory reclamation for lockless synchronization</a>. Journal of Parallel and Distributed Computing, 67(12):1270–1285, 2007.  </td></tr>
<tr>
<td valign="top"><a class="anchor" id="ref-kirsch-2013"></a>[KLP13] </td><td>Christoph Kirsch, Michael Lippautz, and Hannes Payer. <a href="http://www.cs.uni-salzburg.at/~ck/content/publications/conferences/PaCT13-FastScalableQueues.pdf">Fast and scalable, lock-free k-FIFO queues</a>. In <em>Proceedings of the International Conference on Parallel Computing Technologies (PaCT)</em>, pages 208–223, Springer-Verlag, 2013.  </td></tr>
<tr>
<td valign="top"><a class="anchor" id="ref-michael-2002"></a>[Mic02] </td><td>Maged M. Michael. <a href="https://www.liblfds.org/downloads/white%20papers/%5BHash%5D%20-%20%5BMichael%5D%20-%20High%20Performance%20Dynamic%20Lock-Free%20Hash%20Tables%20and%20List-Based%20Sets.pdf">High performance dynamic lock-free hash tables and list-based sets</a>. In <em>Proceedings of the 14th Annual ACM Symposium on Parallel Algorithms and Architectures (SPAA)</em>, pages 73–82. ACM, 2002.  </td></tr>
<tr>
<td valign="top"><a class="anchor" id="ref-michael-2004"></a>[Mic04] </td><td>Maged M. Michael. <a href="http://www.cs.otago.ac.nz/cosc440/readings/hazard-pointers.pdf">Hazard pointers: Safe memory reclamation for lock-free objects</a>. IEEE Transactions on Parallel and Distributed Systems, 15(6):491–504, 2004.  </td></tr>
<tr>
<td valign="top"><a class="anchor" id="ref-michael-1995"></a>[MS95] </td><td>Maged M. Michael and Michael L. Scott. <a href="https://pdfs.semanticscholar.org/cec0/ad7b0fc2d4d6ba45c6212d36217df1ff2bf2.pdf">Correction of a memory management method for lock-free data structures</a>. Technical report, University of Rochester, 1995.  </td></tr>
<tr>
<td valign="top"><a class="anchor" id="ref-michael-1996"></a>[MS96] </td><td>Maged M. Michael and Michael L. Scott. <a href="http://www.cs.rochester.edu/~scott/papers/1996_PODC_queues.pdf">Simple, fast, and practical non-blocking and blocking concurrent queue algorithms</a>. In <em>Proceedings of the 15th Annual ACM Symposium on Principles of Distributed Computing (PODC)</em>, pages 267–275. ACM, 1996.  </td></tr>
<tr>
<td valign="top"><a class="anchor" id="ref-nikolaev-2019"></a>[Nik19] </td><td>Ruslan Nikolaev <a href="http://drops.dagstuhl.de/opus/volltexte/2019/11335/pdf/LIPIcs-DISC-2019-28.pdf">A scalable, portable, and memory-efficient lock-free fifo queue</a>. In <em>Proceedings of the 33rd International Symposium on Distributed Computing (DISC)</em>, 2019.  </td></tr>
<tr>
<td valign="top"><a class="anchor" id="ref-pöter-2018"></a>[PT18a] </td><td>Manuel Pöter and Jesper Larsson Träff. Brief announcement: Stamp-it, a more thread-efficient, concurrent memory reclamation scheme in the C++ memory model. In <em>Proceedings of the 30th Annual ACM Symposium on Parallelism in Algorithms and Architectures (SPAA)</em>, pages 355–358. ACM, 2018.  </td></tr>
<tr>
<td valign="top"><a class="anchor" id="ref-pöter-2018-tr"></a>[PT18b] </td><td>Manuel Pöter and Jesper Larsson Träff. <a href="https://arxiv.org/pdf/1805.08639.pdf">Stamp-it, a more thread-efficient, concurrent memory reclamation scheme in the C++ memory model</a>. Technical report, 2018.  </td></tr>
<tr>
<td valign="top"><a class="anchor" id="ref-ramalhete-2016"></a>[Ram16] </td><td>Pedro Ramalhete. <a href="http://concurrencyfreaks.blogspot.com/2016/11/faaarrayqueue-mpmc-lock-free-queue-part.html">FAAArrayQueue - MPMC lock-free queue (part 4 of 4)</a>. Blog, November 2016.  </td></tr>
<tr>
<td valign="top"><a class="anchor" id="ref-ramalhete-2015"></a>[RC15] </td><td>Pedro Ramalhete and Andreia Correia. <a href="https://github.com/pramalhe/ConcurrencyFreaks/blob/master/papers/left-right-2014.pdf">Left-Right - A Concurrency Control Technique with Wait-Free Population Oblivious Reads</a>. October 2015  </td></tr>
<tr>
<td valign="top"><a class="anchor" id="ref-ramalhete-2017"></a>[RC17] </td><td>Pedro Ramalhete and Andreia Correia. <a href="https://github.com/pramalhe/ConcurrencyFreaks/blob/master/papers/hazarderas-2017.pdf">Brief announcement: Hazard eras - non-blocking memory reclamation</a>. In <em>Proceedings of the 29th Annual ACM Symposium on Parallelism in Algorithms and Architectures (SPAA)</em>, pages 367–369. ACM, 2017.  </td></tr>
<tr>
<td valign="top"><a class="anchor" id="ref-robison-2013"></a>[Rob13] </td><td>Arch D. Robison. <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3712.pdf">Policy-based design for safe destruction in concurrent containers</a>. C++ standards committee paper, 2013.  </td></tr>
<tr>
<td valign="top"><a class="anchor" id="ref-valois-1995"></a>[Val95] </td><td>John D. Valois. <em>Lock-Free Data Structures</em>. PhD thesis, Rensselaer Polytechnic Institute, 1995.  </td></tr>
<tr>
<td valign="top"><a class="anchor" id="ref-vyukov-2008"></a>[Vyu08] </td><td>Dmitry Vyukov. <a href="https://groups.google.com/forum/#!topic/lock-free/qCYGGkrwbcA">Scalable hash map</a>. Google Groups posting, 2008.  </td></tr>
<tr>
<td valign="top"><a class="anchor" id="ref-vyukov-2010"></a>[Vyu10] </td><td>Dmitry Vyukov. <a href="https://groups.google.com/forum/#!topic/lock-free/-bqYlfbQmH0">Simple and efficient bounded MPMC queue</a>. Google Groups posting, 2010.  </td></tr>
</table>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<div class="ttc" id="astructxenium_1_1policy_1_1entries__per__node_html"><div class="ttname"><a href="structxenium_1_1policy_1_1entries__per__node.html">xenium::policy::entries_per_node</a></div><div class="ttdoc">Policy to configure the number of entries per allocated node in ramalhete_queue.</div><div class="ttdef"><b>Definition:</b> policy.hpp:103</div></div>
<div class="ttc" id="astructxenium_1_1policy_1_1reclaimer_html"><div class="ttname"><a href="structxenium_1_1policy_1_1reclaimer.html">xenium::policy::reclaimer</a></div><div class="ttdoc">Policy to configure the reclamation scheme to be used.</div><div class="ttdef"><b>Definition:</b> policy.hpp:25</div></div>
<div class="ttc" id="aclassxenium_1_1ramalhete__queue_html"><div class="ttname"><a href="classxenium_1_1ramalhete__queue.html">xenium::ramalhete_queue</a></div><div class="ttdoc">A fast unbounded lock-free multi-producer/multi-consumer FIFO queue.</div><div class="ttdef"><b>Definition:</b> ramalhete_queue.hpp:55</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
